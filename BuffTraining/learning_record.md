# 记录修改与学习历程
主要记录大概干了什么事，便于复现
## 1.分割数据集
按照教程走就好，按照yolo的数据集的文件结构分割即可
## 2.解决源码无法引用yolo的问题
或许是Python不能用“-”来作为文件名，但是“_”是可以的。或许路径可以找到，但是不能import
## 3.不要闲得蛋疼去改人家的路径
原本是什么路径就是什么路径，把绝对路径改为相对路径确实会便于把文件夹移动来移动去，但是第一不一定改的对，第二改完之后可读性会非常差，会破坏原有结构
## 4.克隆之前看好这个库里有什么
比如原先的库没有pose，但是仔细找找能找到个有pose的  
现在克隆的库的链接:<https://github.com/iJoyRide/yolov8pose>  
哦以及西浦的数据集，感谢Daddy<https://github.com/zRzRzRzRzRzRzR/YOLO-of-RoboMaster-Keypoints-Detection-2023>
## 5.纠正上面的那条
其实可以直接下载官方库的，官方库里是包含之前所有更新的，也就是yolov8也包括，界面上写的yolov11只是说最新更新到v11  
不过我也懒得改了，就先这么用着吧
## 6.关于requirement.txt
requirement.txt里的pytorch等都是cpu版本的（至少这个库里的是），因此如果想在本地使用cuda需要重新安装相应版本的  
安装cuda相关时有些坑，比如配置环境变量，有好多教程就没说这个，导致nvcc -V是找不到的  
详情参考这篇博客：<https://blog.csdn.net/weixin_58503946/article/details/142702873>  
有时还会遇到一些其他错误，比如找不着这个pip什么的，这个大概因为这个文件里的版本太老或者选了个可能被删除了的中间版本，大部分换个版本就好，不过仍然建议换以前上网查查
## 7.Autodl使用
参照教程，直接使用pycharm专业版连接（咱有学生认证）。第一次链接记得无卡开机，因为第一次链接的时候会把你的项目的东西全部传上去，如果你的项目中有某些很大的东西就会传很久，就会白白烧钱  
好像autodl和pycharm并不是同步的，在本地修改的代码确实会同步上去，但是服务器训练好的模型却不会同步下到本地，仍然是参考教程，用scp就挺快的（主要是懒得搞别的东西，之后我研究研究云盘或者啥的）  
关于autodl的环境问题，咱直接用社区镜像里的yolov8的那个就行，关键注意一点:***配置解释器的要选miniconda的解释器***，你选择的镜像是配置在那里的。
## 8.C盘爆炸
batch_size太大了，小点，不过即使如此也能会炸掉，因为你的c盘可能剩的就不多。在服务器上我用batch=64直接炸了，更别提本地电脑了。实测服务器上batch_size=32是可以的，占8G好像。
## 9.预测与可视化
这一块直接看代码吧，主要问题有：
- cv2绘图的颜色是BGR而非RGB，更改颜色的时候注意一下
- 对于python新手而言（比如开始做这个项目时的我），可能一时间找不到返回值的格式（不像c++那么清楚），其实如果懒得去翻代码的话，也可以通过调试来找到返回值的数据类型是什么。对于YOLO而言，他存放在engine\model.py的这个文件中，可以自行查阅
- 目前预测很抖，考虑加个滤波啥的，当前想法是把图像坐标系转换成以四点中心为原点，宽方向为x，高方向为y的坐标系，然后对x，y做不同程度的滤波，对x更信任新数据，对y更信任过去的数据。不过目前感觉不大好办，可能要自己算一算。

## 9.训练的yaml文件
官网上就有 https://docs.ultralytics.com/zh/usage/cfg/
当然注意不是什么都能用的，有的咱可能用不了  
其中额外说一点，kobj_loss这个值咱是没有的。这个损失的定义是“在姿态估计模型的训练中，kobj_loss（关键点对象性损失，KeyPoint Objectness Loss）的使用是为了增强模型对关键点存在性的判断能力。”
而咱这个数据标注是二维的关键点标注，也就是说没有标记该点是否存在，这就是为什么没有loss的原因。（不知道二维关键点标注和三维关键点的可以查一查）

